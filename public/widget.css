/* ========================================================================
   Expungement.Legal - Chatbot Widget Styles
   Clean editorial theme with strong contrast and clear hierarchy
   ======================================================================== */

@import url('https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=Source+Serif+4:opsz,wght@8..60,600;8..60,700&display=swap');

:root {
  --el-font: 'Manrope', 'Avenir Next', 'Segoe UI', sans-serif;
  --el-font-display: 'Source Serif 4', Georgia, serif;

  --el-primary: #1f4f9d;
  --el-primary-dark: #123668;
  --el-primary-soft: #e7eefb;
  --el-accent: #c08a2e;
  --el-accent-soft: #fdf6e8;

  --el-bg-page: #f4f7fc;
  --el-bg-surface: #ffffff;
  --el-bg-soft: #f5f8fe;
  --el-bg-soft-2: #eef3fc;
  --el-bg-user: linear-gradient(155deg, #1f4f9d 0%, #173e7c 100%);

  --el-text: #12243e;
  --el-text-soft: #3f5476;
  --el-text-muted: #647a9f;
  --el-text-inverse: #ffffff;

  --el-border: #d9e3f4;
  --el-border-strong: #c6d5ef;

  --el-success: #20a665;
  --el-warning: #b87915;
  --el-error: #d64545;

  --el-radius-xl: 22px;
  --el-radius-lg: 16px;
  --el-radius-md: 12px;
  --el-radius-pill: 999px;

  --el-shadow-shell: 0 26px 60px rgba(20, 42, 78, 0.25), 0 12px 26px rgba(19, 44, 83, 0.12);
  --el-shadow-soft: 0 6px 20px rgba(18, 40, 74, 0.1);

  --el-transition: 220ms cubic-bezier(0.2, 0.75, 0.25, 1);

  --el-widget-width: 408px;
  --el-widget-height: 680px;
}

#el-chatbot-widget,
#el-chatbot-widget * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

/* ------------------------------------------------------------------------
   Launcher
   ------------------------------------------------------------------------ */
#el-chatbot-launcher {
  position: fixed;
  right: 20px;
  bottom: 20px;
  z-index: 99998;
  width: 64px;
  height: 64px;
  border: 0;
  border-radius: 50%;
  cursor: pointer;
  display: grid;
  place-items: center;
  background: radial-gradient(circle at 30% 25%, #2f6bca 0%, #1f4f9d 46%, #163c76 100%);
  box-shadow: 0 12px 28px rgba(23, 62, 124, 0.35), 0 2px 7px rgba(0, 0, 0, 0.2);
  transition: transform var(--el-transition), box-shadow var(--el-transition), opacity var(--el-transition);
  animation: el-launcher-float 3.6s ease-in-out infinite;
}

#el-chatbot-launcher:hover {
  transform: translateY(-2px) scale(1.03);
  box-shadow: 0 15px 34px rgba(23, 62, 124, 0.42), 0 4px 11px rgba(0, 0, 0, 0.22);
}

#el-chatbot-launcher:active {
  transform: translateY(0) scale(0.98);
}

#el-chatbot-launcher.el-hidden {
  opacity: 0;
  pointer-events: none;
  transform: scale(0.85);
}

#el-chatbot-launcher svg {
  width: 29px;
  height: 29px;
  fill: #fff;
}

@keyframes el-launcher-float {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-2px);
  }
}

/* ------------------------------------------------------------------------
   Widget shell
   ------------------------------------------------------------------------ */
#el-chatbot-widget {
  position: fixed;
  right: 20px;
  bottom: 94px;
  z-index: 99999;
  width: min(var(--el-widget-width), calc(100vw - 22px));
  height: min(var(--el-widget-height), calc(100vh - 112px));
  max-height: calc(100vh - 112px);
  border-radius: var(--el-radius-xl);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  color: var(--el-text);
  font-family: var(--el-font);
  background: var(--el-bg-surface);
  border: 1px solid var(--el-border);
  box-shadow: var(--el-shadow-shell);
  transform-origin: bottom right;
  transition: transform 260ms cubic-bezier(0.2, 0.85, 0.25, 1), opacity 220ms ease;
}

#el-chatbot-widget::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(500px 180px at 100% 0%, rgba(31, 79, 157, 0.08), rgba(31, 79, 157, 0)),
    radial-gradient(460px 160px at -20% 100%, rgba(192, 138, 46, 0.08), rgba(192, 138, 46, 0));
}

#el-chatbot-widget > * {
  position: relative;
  z-index: 1;
}

#el-chatbot-widget.el-closed {
  opacity: 0;
  pointer-events: none;
  transform: translateY(18px) scale(0.96);
}

/* ------------------------------------------------------------------------
   Header
   ------------------------------------------------------------------------ */
.el-header {
  padding: 15px 16px 13px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  background: linear-gradient(135deg, #173e7c 0%, #1f4f9d 62%, #2b66bf 100%);
  border-bottom: 1px solid rgba(255, 255, 255, 0.18);
}

.el-header-info {
  display: flex;
  align-items: center;
  gap: 11px;
  min-width: 0;
}

.el-header-avatar {
  width: 38px;
  height: 38px;
  border-radius: 11px;
  display: grid;
  place-items: center;
  font-size: 18px;
  background: rgba(255, 255, 255, 0.18);
  border: 1px solid rgba(255, 255, 255, 0.3);
}

.el-header-text h3 {
  font-family: var(--el-font-display);
  font-size: 29px;
  font-weight: 700;
  letter-spacing: 0.2px;
  line-height: 1;
  color: #fff;
  white-space: nowrap;
  text-shadow: 0 2px 8px rgba(10, 24, 47, 0.35);
}

.el-header-text p {
  margin-top: 3px;
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12.5px;
  font-weight: 700;
  letter-spacing: 0.01em;
  color: rgba(233, 244, 255, 0.98);
}

.el-status-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #2de28f;
  box-shadow: 0 0 0 5px rgba(45, 226, 143, 0.22);
}

.el-header-actions {
  display: flex;
  align-items: center;
}

.el-header-btn {
  width: 30px;
  height: 30px;
  border-radius: 10px;
  border: 1px solid rgba(255, 255, 255, 0.26);
  background: rgba(255, 255, 255, 0.08);
  color: #fff;
  cursor: pointer;
  display: grid;
  place-items: center;
  transition: background var(--el-transition), transform var(--el-transition), border-color var(--el-transition);
}

.el-header-btn:hover {
  background: rgba(255, 255, 255, 0.2);
  border-color: rgba(255, 255, 255, 0.38);
  transform: scale(1.03);
}

/* ------------------------------------------------------------------------
   Messages
   ------------------------------------------------------------------------ */
.el-messages {
  flex: 1;
  min-height: 0;
  padding: 18px 14px 16px;
  overflow-y: auto;
  overscroll-behavior: contain;
  background:
    linear-gradient(var(--el-bg-surface), var(--el-bg-surface)) padding-box,
    linear-gradient(180deg, #ffffff 0%, #f9fbff 100%) border-box;
}

.el-messages::-webkit-scrollbar {
  width: 8px;
}

.el-messages::-webkit-scrollbar-track {
  background: transparent;
}

.el-messages::-webkit-scrollbar-thumb {
  background: #d0dbf0;
  border-radius: var(--el-radius-pill);
}

.el-msg {
  max-width: 90%;
  width: fit-content;
  margin: 0 0 10px;
  padding: 11px 13px;
  border-radius: var(--el-radius-lg);
  font-size: 15.5px;
  line-height: 1.55;
  letter-spacing: 0;
  word-break: break-word;
  animation: el-msg-rise 190ms ease;
  box-shadow: var(--el-shadow-soft);
}

@keyframes el-msg-rise {
  from {
    opacity: 0;
    transform: translateY(6px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.el-msg-bot {
  align-self: flex-start;
  background: linear-gradient(180deg, #ffffff, #f8fbff);
  color: var(--el-text);
  border: 1px solid var(--el-border);
  border-top-left-radius: 7px;
}

.el-msg-user {
  align-self: flex-end;
  margin-left: auto;
  background: var(--el-bg-user);
  color: var(--el-text-inverse);
  border: 1px solid rgba(18, 54, 104, 0.45);
  border-bottom-right-radius: 7px;
}

.el-msg-bot p,
.el-msg-user p {
  margin-bottom: 8px;
}

.el-msg-bot p:last-child,
.el-msg-user p:last-child {
  margin-bottom: 0;
}

.el-msg-bot strong,
.el-msg-user strong {
  font-weight: 800;
}

.el-msg-bot em,
.el-msg-user em {
  font-style: normal;
  color: #1e4a94;
  font-weight: 700;
}

.el-msg-user em {
  color: rgba(255, 255, 255, 0.88);
}

.el-typing {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  padding: 12px 14px;
  margin: 0 0 10px;
  border-radius: var(--el-radius-lg);
  border-top-left-radius: 7px;
  background: #f2f6ff;
  border: 1px solid var(--el-border);
  width: fit-content;
}

.el-typing-dot {
  width: 7px;
  height: 7px;
  border-radius: 50%;
  background: #8ba5d6;
  animation: el-dot-blink 1.2s infinite ease-in-out;
}

.el-typing-dot:nth-child(2) {
  animation-delay: 0.15s;
}

.el-typing-dot:nth-child(3) {
  animation-delay: 0.3s;
}

@keyframes el-dot-blink {
  0%,
  80%,
  100% {
    opacity: 0.3;
    transform: translateY(0);
  }
  40% {
    opacity: 1;
    transform: translateY(-2px);
  }
}

/* ------------------------------------------------------------------------
   Quick replies
   ------------------------------------------------------------------------ */
.el-quick-replies {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin: 2px 0 12px;
}

.el-qr-btn {
  border: 1px solid #bdd0ee;
  background: #fff;
  color: #19488f;
  font-family: var(--el-font);
  font-size: 13.5px;
  font-weight: 700;
  padding: 8px 13px;
  border-radius: var(--el-radius-pill);
  cursor: pointer;
  transition: transform var(--el-transition), border-color var(--el-transition), background var(--el-transition), box-shadow var(--el-transition);
}

.el-qr-btn:hover {
  background: #f4f8ff;
  border-color: #9bb8e4;
  box-shadow: 0 4px 14px rgba(24, 74, 149, 0.13);
  transform: translateY(-1px);
}

/* ------------------------------------------------------------------------
   Forms and result cards
   ------------------------------------------------------------------------ */
.el-lead-form {
  width: min(340px, 100%);
  display: grid;
  gap: 9px;
  margin: 4px 0 12px;
}

.el-lead-form input {
  width: 100%;
  border: 1px solid var(--el-border);
  border-radius: 10px;
  padding: 10px 12px;
  font-family: var(--el-font);
  font-size: 14px;
  color: var(--el-text);
  background: #fff;
  outline: none;
  transition: border-color var(--el-transition), box-shadow var(--el-transition);
}

.el-lead-form input::placeholder {
  color: #8ba0c2;
}

.el-lead-form input:focus {
  border-color: #99b5e3;
  box-shadow: 0 0 0 3px rgba(31, 79, 157, 0.14);
}

.el-lead-submit {
  border: 0;
  border-radius: 11px;
  padding: 11px 14px;
  font-family: var(--el-font);
  font-size: 14px;
  font-weight: 800;
  color: #fff;
  background: linear-gradient(145deg, #1f4f9d, #153d7a);
  cursor: pointer;
  transition: transform var(--el-transition), box-shadow var(--el-transition), opacity var(--el-transition);
  box-shadow: 0 8px 20px rgba(23, 61, 120, 0.25);
}

.el-lead-submit:hover {
  transform: translateY(-1px);
  box-shadow: 0 12px 22px rgba(23, 61, 120, 0.3);
}

.el-lead-submit:disabled {
  opacity: 0.65;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

.el-result-card {
  width: min(360px, 100%);
  margin: 4px 0 12px;
  padding: 13px 14px;
  border-radius: 14px;
  border: 1px solid var(--el-border-strong);
  background: #fff;
}

.el-result-card.likely,
.el-result-card.eligible {
  border-color: rgba(32, 166, 101, 0.35);
  background: linear-gradient(180deg, #ffffff 0%, #f3fcf7 100%);
}

.el-result-card.unlikely {
  border-color: rgba(214, 69, 69, 0.32);
  background: linear-gradient(180deg, #ffffff 0%, #fef6f6 100%);
}

.el-result-card.not_yet,
.el-result-card.needs_review {
  border-color: rgba(184, 121, 21, 0.36);
  background: linear-gradient(180deg, #fffefc 0%, #fff8ec 100%);
}

.el-result-status {
  margin-bottom: 8px;
  font-size: 13px;
  font-weight: 800;
}

.el-result-status.likely,
.el-result-status.eligible {
  color: #198a54;
}

.el-result-status.unlikely {
  color: #b12f2f;
}

.el-result-status.not_yet,
.el-result-status.needs_review {
  color: #8f5e11;
}

.el-result-reason,
.el-result-next {
  font-size: 14px;
  line-height: 1.5;
  color: var(--el-text-soft);
}

.el-result-next {
  margin-top: 7px;
}

.el-result-disclaimer {
  margin-top: 9px;
  font-size: 12px;
  line-height: 1.45;
  color: var(--el-text-muted);
}

/* ------------------------------------------------------------------------
   Input and footer
   ------------------------------------------------------------------------ */
.el-input-area {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 11px;
  background: #fff;
  border-top: 1px solid var(--el-border);
}

.el-input-field {
  flex: 1;
  min-width: 0;
  border: 1px solid #cedcf3;
  background: #fdfefe;
  color: var(--el-text);
  font-family: var(--el-font);
  font-size: 16px;
  line-height: 1.35;
  border-radius: 11px;
  padding: 10px 12px;
  outline: none;
  transition: border-color var(--el-transition), box-shadow var(--el-transition), background var(--el-transition);
}

.el-input-field::placeholder {
  color: #8ea3c5;
}

.el-input-field:focus {
  border-color: #8eacdc;
  box-shadow: 0 0 0 4px rgba(31, 79, 157, 0.14);
  background: #fff;
}

.el-send-btn {
  width: 40px;
  height: 40px;
  border-radius: 12px;
  border: 0;
  cursor: pointer;
  display: grid;
  place-items: center;
  background: linear-gradient(150deg, #1f4f9d, #173d79);
  color: #fff;
  box-shadow: 0 6px 18px rgba(23, 61, 120, 0.3);
  transition: transform var(--el-transition), box-shadow var(--el-transition), opacity var(--el-transition);
}

.el-send-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 20px rgba(23, 61, 120, 0.32);
}

.el-send-btn:disabled {
  opacity: 0.55;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

.el-send-btn svg {
  width: 19px;
  height: 19px;
  fill: currentColor;
}

.el-human-btn {
  border: 0;
  border-top: 1px solid #e4ddcf;
  background: linear-gradient(180deg, #fbf8f1 0%, #f6f0e3 100%);
  color: #4f3e20;
  font-family: var(--el-font);
  font-size: 13px;
  font-weight: 800;
  letter-spacing: 0.01em;
  padding: 8px 14px calc(8px + env(safe-area-inset-bottom));
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  transition: background var(--el-transition), color var(--el-transition);
}

.el-human-btn:hover {
  background: linear-gradient(180deg, #f7f1e4 0%, #f2e8d4 100%);
  color: #3d2f17;
}

/* ------------------------------------------------------------------------
   Error states
   ------------------------------------------------------------------------ */
.el-error-msg {
  align-self: center;
  margin: 3px 0 4px;
  background: #fdf1f1;
  color: #8b2f2f;
  border: 1px solid #f2c8c8;
  border-radius: 12px;
  padding: 9px 12px;
  font-size: 12.5px;
  text-align: center;
  max-width: 95%;
}

.el-retry-btn {
  margin-top: 6px;
  border: 1px solid #d89797;
  border-radius: var(--el-radius-pill);
  background: #fff;
  color: #8b2f2f;
  font-family: var(--el-font);
  font-size: 12px;
  font-weight: 700;
  padding: 5px 11px;
  cursor: pointer;
  transition: background var(--el-transition), border-color var(--el-transition);
}

.el-retry-btn:hover {
  background: #fce8e8;
  border-color: #cf7474;
}

/* ------------------------------------------------------------------------
   Responsive
   ------------------------------------------------------------------------ */
@media (max-width: 900px) {
  #el-chatbot-widget {
    right: 10px;
    bottom: 86px;
    width: min(400px, calc(100vw - 14px));
    height: min(670px, calc(100vh - 100px));
  }

  #el-chatbot-launcher {
    right: 14px;
    bottom: 14px;
  }
}

@media (max-width: 560px) {
  #el-chatbot-widget {
    right: 0;
    bottom: 0;
    width: 100vw;
    height: 100dvh;
    max-height: 100dvh;
    border-radius: 0;
    border-left: 0;
    border-right: 0;
  }

  #el-chatbot-launcher {
    right: 12px;
    bottom: calc(10px + env(safe-area-inset-bottom));
    width: 58px;
    height: 58px;
  }

  .el-header {
    padding-top: calc(13px + env(safe-area-inset-top));
  }

  .el-header-text h3 {
    font-size: 26px;
  }

  .el-messages {
    padding-left: 12px;
    padding-right: 12px;
  }

  .el-input-area {
    padding-bottom: calc(10px + env(safe-area-inset-bottom));
  }
}
